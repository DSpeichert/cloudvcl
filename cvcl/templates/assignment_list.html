{% extends "master.html" %}
{% load bootstrap3 %}

{% block content %}
    <h1>Assignment List
        {% if user.is_instructor %}
            <div class="pull-right">
                <a class="btn btn-primary" href="{% url 'assignments.create' %}" role="button">
                    {% bootstrap_icon "plus" %} Create Assignment</a>

                <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseText"
                        aria-expanded="false" aria-controls="collapseText">
                    {% bootstrap_icon "question-sign" %}Help
                </button>
                <div class="collapse" id="collapseText">
                    <div class="well">
                        <h5>Lorem Ipsum</h5>
                    </div>
                </div>
            </div>
        {% endif %}
    </h1>

    {% if assignment_list %}
        <table class="table table-hover">
            <tr>
                <th>Course</th>
                <th>Name</th>
                <th>Description</th>
                <th>Dates Available</th>
                {% if assignment.course.instructor == user %}
                    <th></th>
                {% endif %}
                <th></th> <!-- This extends the top table line to the far right -->
            </tr>
            {% for assignment in assignment_list %}
                <tr>
                    <td><a href="{% url "courses.detail" assignment.course.id %}">{{ assignment.course.name }}</a></td>
                    <td><a href="{% url "assignments.detail" assignment.id %}">{{ assignment.name }}</a></td>
                    <td>{{ assignment.description | truncatewords:20 }}</td>
                    <td>{{ assignment.start_date }} - {{ assignment.end_date }}
                        {% if not assignment.is_current %}
                            <br/><span class="label label-default">CURRENTLY HIDDEN FROM STUDENTS</span>
                        {% endif %}
                    </td>
                    {% if assignment.course.instructor == user %}
                        <td>
                            {% url 'assignments.update' pk=assignment.id as url %}
                            {% bootstrap_button button_type='link' content='Edit' button_class='btn-warning' href=url %}

                            {% url 'assignments.delete' pk=assignment.id as url %}
                            {% bootstrap_button button_type='link' content='Delete' button_class='btn-danger' href=url %}
                            {% url 'assignments.update' pk=assignment.id as url %}
                        </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No assignments available.</p>
    {% endif %}
{% endblock %}
